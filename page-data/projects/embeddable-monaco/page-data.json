{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-tsx","path":"/projects/embeddable-monaco/","result":{"data":{"markdownRemark":{"html":"<p>Test on <a href=\"https://embeddable-monaco.lukasbach.com\">https://embeddable-monaco.lukasbach.com</a>.</p>\n<p><a href=\"https://microsoft.github.io/monaco-editor/\">Monaco Editor</a> is an code editor that powers VS Code and can be reused\nin other apps. Compared to other frontend libraries, setup is a bit harder with Monaco since it uses webworkers and\nrequires a more complicated build setup. In most use cases it can be implemented with build plugins, but in some\nuse cases, there are harder restrictions on the availability of the build system or the use of web workers, where\nthis is not possible.</p>\n<p>This project provides a pre-built version of Monaco Editor that can be embedded in an iframe and controlled via\na simple messaging API. It is a drop-in replacement for the Monaco Editor, but it can be used in environments\nwhere the build system is not available or where web workers are not allowed.</p>\n<h2>Example</h2>\n<pre><code class=\"language-html\">&#x3C;iframe src=\"https://embeddable-monaco.lukasbach.com?code=initial_code&#x26;language=javascript&#x26;theme=vs-dark\" id=\"iframe\">&#x3C;/iframe>\n</code></pre>\n<pre><code class=\"language-javascript\">const iframe = document.getElementById(\"iframe\");\nwindow.addEventListener(\"message\", ({ data }) => {\n    switch(data.type) {\n        case \"ready\": {\n            iframe.contentWindow?.postMessage({\n                type: \"change-value\",\n                value: \"new initial value\"\n            }, \"*\");\n            break;\n        }\n        case \"change\": {\n            console.log(\"current value is\", data.value)\n            break;\n        }\n    }\n});\n</code></pre>\n<h2>Usage</h2>\n<p>To use, just embed the URL <a href=\"https://embeddable-monaco.lukasbach.com\">https://embeddable-monaco.lukasbach.com</a> in an iframe.</p>\n<p>There are two primary ways to configure and communicate with the editor. First, configuration can be passed through\nURL query parameters. Second, the editor can be controlled via a simple messaging API, so that configuration\ncan be changed during runtime, and changes to the editor can be passed back to the parent frame.</p>\n<p>The implementation is not complicated, so an easy way to understand what is possible is to just look into\nthe implementation file <a href=\"https://github.com/lukasbach/embeddable-monaco/raw/main/src/embed.ts\">src/embed.ts</a>.</p>\n<h2>Supported query parameters</h2>\n<p>The following query parameters are supported:</p>\n<ul>\n<li><code>code</code>: Initial code, defaults to empty</li>\n<li><code>lang</code>: Initial language, defaults to javascript</li>\n<li><code>theme</code>: Initial theme, defaults to vs-light\n<ul>\n<li>Also supports all of these themes: <a href=\"https://github.com/brijeshb42/monaco-themes/blob/master/themes/themelist.json\">https://github.com/brijeshb42/monaco-themes/blob/master/themes/themelist.json</a></li>\n<li>Use the value of the theme as name, e.g. \"Vibrant Ink\"</li>\n</ul>\n</li>\n<li><code>contextmenu</code>: boolean, \"true\" or \"false\"</li>\n<li><code>folding</code>: boolean, \"true\" or \"false\"</li>\n<li><code>readonly</code>: boolean, \"true\" or \"false\"</li>\n<li><code>lineNumbers</code>: boolean, \"on\" or \"off\"</li>\n<li><code>minimap</code>: boolean, \"true\" or \"false\"</li>\n<li><code>background</code>: custom background color, can also be transparent</li>\n<li><code>javascriptDefaults</code>: set javascript language properties, required to use:\n<ul>\n<li><code>javascriptDefaultsNoSemanticValidation</code></li>\n<li><code>javascriptDefaultsNoSyntaxValidation</code></li>\n</ul>\n</li>\n<li><code>typescriptDefaults</code>: set typescript language properties, required to use:\n<ul>\n<li><code>typescriptDefaultsNoSemanticValidation</code></li>\n<li><code>typescriptDefaultsNoSyntaxValidation</code></li>\n</ul>\n</li>\n<li><code>dontPostValueOnChange</code>: In the <code>change</code> handler, don't post the value back to the parent frame every time the model is changed</li>\n<li><code>context</code>: a string that is passed back in every message sent back from the iframe</li>\n</ul>\n<h2>Messaging API</h2>\n<h3>Messages sent by the iframe to the parent</h3>\n<p>Receive messages via</p>\n<pre><code class=\"language-javascript\">iframe.addEventListener('message', (e) => {\n    console.log(`message type is ${e.data.type}, payload is in`, e.data);\n});\n</code></pre>\n<p>Messages sent by the iframe:</p>\n<ul>\n<li><code>{ type: \"ready\" }</code>: Sent when the editor is ready</li>\n<li><code>{ type: \"change\", value: string }</code>: Sent everytime the editor value changes</li>\n<li><code>{ type: \"content\", value: string }</code>: Sent when the editor content is requested via <code>get-content</code> message</li>\n</ul>\n<h3>Messages that can be sent to the iframe from the parent</h3>\n<p>Send messages to the iframe via</p>\n<pre><code class=\"language-javascript\">iframe.contentWindow.postMessage({ type: \"type\", ...parameters }, \"*\");\n</code></pre>\n<p>Messages that can be sent to the iframe</p>\n<ul>\n<li><code>{ type: \"change-options\", options: IEditorOptions }</code>: Change editor options</li>\n<li><code>{ type: \"change-value\", value: string }</code>: Change editor value</li>\n<li><code>{ type: \"change-language\", language: string }</code>: Change editor language</li>\n<li><code>{ type: \"change-theme\", theme: string }</code>: Change editor theme</li>\n<li><code>{ type: \"change-background\", background: string, theme?: string }</code>: Change editor background color. Can also be transparent</li>\n<li><code>{ type: \"change-javascript-defaults\", javascriptDefaults: IJavaScriptDefaults }</code>: Change javascript language defaults</li>\n<li><code>{ type: \"change-typescript-defaults\", typescriptDefaults: ITypeScriptDefaults }</code>: Change typescript language defaults</li>\n<li><code>{ type: \"get-content }</code>: IFrame will dispatch a <code>content</code> message with the current editor value</li>\n</ul>","excerpt":"Test on https://embeddable-monaco.lukasbach.com. Monaco Editor is an code editor that powers VS Code and can be reused\nin other apps. Compared to other frontend libraries, setup is a bit harder with Monaco since it uses webworkers and\nrequires a more complicated build setup. In most use cases it caâ€¦","frontmatter":{"date":"March 22, 2023","slug":"/projects/embeddable-monaco","title":"Embeddable Monaco Editor","category":null,"kind":"project","repo":"lukasbach/embeddable-monaco","download":null,"template":"advanced","medium":null,"devto":null}}},"pageContext":{"id":"b22377b2-d4f4-5325-9e00-9243e330242e","frontmatter__slug":"/projects/embeddable-monaco","__params":{"frontmatter__slug":"projects"}}},"staticQueryHashes":["1266385000","3319912920","79628814"],"slicesMap":{}}