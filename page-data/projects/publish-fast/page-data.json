{"componentChunkName":"component---src-pages-markdown-remark-frontmatter-slug-tsx","path":"/projects/publish-fast/","result":{"data":{"markdownRemark":{"html":"<p>This project is inspired by <a href=\"https://github.com/sindresorhus/np\">np</a>, and pretty much does the same thing,\nexcept that publish-fast is suitable to run in CI, directly creates a github release from a local template\ninstead of just drafting one, supports uploading release assets, automatically updates a changelog file\nand supports config files. It thus does more stuff automatically without much manual effort, and is more\nsuitable to run in automated workflows.</p>\n<p><img src=\"https://github.com/lukasbach/publish-fast/raw/main/pf-release.gif\" alt=\"pf-release.gif\"></p>\n<h2>Features</h2>\n<ul>\n<li>Automatically bumps version, creates a commit, creates a tag, and pushes it to the remote</li>\n<li>A list of scripts to be run before the release can be provided (e.g. \"lint,test\")</li>\n<li>Supports npm, yarn and pnpm</li>\n<li>Automatically checks that the user is on the correct branch before releasing</li>\n<li>Automatically checks that the working directory is clean before releasing</li>\n<li>Loads release notes from a local file, and clears that file after publishing to an empty file or a predefined template</li>\n<li>Can update a local changelog file with release notes</li>\n<li>Can create a github release with release notes</li>\n<li>Can upload assets to the github release defined by a glob option</li>\n<li>Dry Run mode</li>\n<li>Almost all steps can be skipped</li>\n<li>Options can be passed in through a <code>.publishrc.json</code> file or the <code>publish</code> property in a <code>package.json</code> file</li>\n</ul>\n<h2>Caveats</h2>\n<ul>\n<li>The tool is currently opinionated about using github, and doesn't support other git hosting services</li>\n<li>There is no support for reading changelog data from commit messages. The intended workflow is to collect changes\nin a markdown file which is used for creating the changelog and github release, or not use a changelog at all.</li>\n</ul>\n<h2>Release Notes Workflow</h2>\n<p>This tool supports to automatically read release notes to be used in the changelog and github release.\nCreate a file in your repo, e.g. <code>release-notes.md</code>. There, every time you add new changes to your project,\ndocument the changes you made in that file.</p>\n<p>When running <code>publish-fast</code> to create a new release, use the option <code>--release-notes-source release-notes.md</code>.\nRemember that you can create a script alias in your package.json for the release script, so you don't need to\npass that every time. The release notes will be read from that file, and then the file will be cleared to an empty\nfile.</p>\n<p>You can also define a template to which the release notes will be reset after the release instead of clearing it.\nUse the option <code>--release-notes-template release-notes-template.md</code> to do that.</p>\n<h2>Github Token</h2>\n<p>If uploading a github release is enabled, the tool needs a valid Github Auth token. If you run the tool on your\ndev machine, the easiest way is to install the <a href=\"https://cli.github.com/\">gh cli</a> and run <code>gh auth login</code> to\ncreate a token. Then, the tool will automatically use that token.</p>\n<p>If you do not want to install the Github CLI, you can pass the token via the <code>--github-token</code> option or through the\n<code>GITHUB_TOKEN</code> environment variable. Alternatively, the tool will interactively ask for the token when run.</p>\n<h2>How to use</h2>\n<p>You can install <code>publish-fast</code> as dependency to your project,</p>\n<pre><code>npm install publish-fast\n</code></pre>\n<p>and then add a script to your <code>package.json</code>:</p>\n<pre><code>\"scripts\": {\n  \"release\": \"publish-fast patch\"\n}\n</code></pre>\n<p>Then you can run <code>yarn release</code> or <code>npm run release</code> to publish a new version.</p>\n<p>You can also install it globally via</p>\n<pre><code>npm install -g publish-fast\n</code></pre>\n<p>or directly use via</p>\n<pre><code>npx publish-fast\n</code></pre>\n<p>Usage:\nUsage: publish-fast [options] [bump]</p>\n<pre><code>Options:\n  -V, --version                                      output the version number\n  --verbose                                          verbose output (default: false)\n  --dry-run                                          dry run (default: false)\n  --package-manager &#x3C;package-manager>                package manager, detected from lock file by default (default: \"auto\")\n  --pre-scripts &#x3C;pre-scripts>                        pre scripts seperated by commas (e.g. lint,test) (default: \"lint,test\")\n  --commit-message &#x3C;commit-message>                  new version commit message (default: \"chore(release): {version}\")\n  --commit-author &#x3C;commit-author>                    new version commit author\n  --commit-email &#x3C;commit-email>                      new version commit email\n  --branch &#x3C;branch>                                  release branch, for verification (default: \"main\")\n  --release-notes-source &#x3C;release-notes-source>      path to release notes source markdown file. Leave empty to use empty release notes.\n  --release-notes-template &#x3C;release-notes-template>  path to release notes template markdown file. Leave empty to not recreate the file after publishing.\n  --changelog &#x3C;changelog>                            path to changelog file. Leave empty to not update changelog. Will automatically be skipped if file doesn't exist. (default: \"CHANGELOG.md\")\n  --github-token &#x3C;github-token>                      github token for creating github release. If not provided, CLI will attempt to load through gh CLI, or alternatively interactively ask.\n  --draft-release                                    create github release as draft (default: false)\n  --npm-tag &#x3C;npm-tag>                                npm tag to publish to (default: \"latest\")\n  --npm-access &#x3C;npm-access>                          npm access level\n  --otp &#x3C;npm-otp>                                    npm otp code\n  --release-assets &#x3C;glob>                            glob for release assets to upload to the github release\n  --pipe-stdout                                      pipe stdout of child processes through (default: false)\n  --no-version-prefix                                dont prefix the version with \"v\" (i.e. 1.0.0 instead of v1.0.0) in tag and github release name\n  --yes                                              skip verify prompt (default: false)\n  --skip-install                                     skip installing dependencies (default: false)\n  --skip-github-release                              skip creating github release (default: false)\n  --skip-publish                                     skip publishing to npm (default: false)\n  --skip-bump                                        skip bumping version (default: false)\n  --skip-push                                        skip pushing changes (default: false)\n  --skip-commit                                      skip committing changes (default: false)\n  -h, --help                                         display help for command\n</code></pre>\n<p>You can also pass in options through a <code>.publishrc.json</code> file or the <code>publish</code> property in a <code>package.json</code> file.\nNote that all options, which are snake-case in the CLI, are camelCase in the config file, i.e. the <code>--release-notes-source</code>\noption becomes <code>releaseNotesSource</code> in the config file.</p>\n<h2>Dry Run Demo</h2>\n<p><img src=\"https://github.com/lukasbach/publish-fast/raw/main/pf-dryrun.gif\" alt=\"pf-dryrun.gif\"></p>\n<h2>How to develop</h2>\n<ul>\n<li><code>yarn</code> to install dependencies</li>\n<li><code>yarn start</code> to run in dev mode</li>\n<li><code>yarn test</code> to run tests</li>\n<li><code>yarn lint</code> to test and fix linter errors</li>\n</ul>\n<p>To publish a new version, run <code>yarn release</code>.</p>","excerpt":"This project is inspired by np, and pretty much does the same thing,\nexcept that publish-fast is suitable to run in CI, directly creates a github release from a local template\ninstead of just drafting one, supports uploading release assets, automatically updates a changelog file\nand supports configâ€¦","frontmatter":{"date":"March 27, 2023","slug":"/projects/publish-fast","title":"publish-fast","category":null,"kind":"project","repo":"lukasbach/publish-fast","download":null,"template":"advanced","medium":null,"devto":null}}},"pageContext":{"id":"988a2e06-d9dc-5c84-a09d-a30430167eae","frontmatter__slug":"/projects/publish-fast","__params":{"frontmatter__slug":"projects"}}},"staticQueryHashes":["1266385000","3319912920","79628814"],"slicesMap":{}}